{"ast":null,"code":"var __jsx = React.createElement;\n\n/**********************************************************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *\n *                                                                                                                    *\n *  Licensed under the Apache License, Version 2.0 (the License). You may not use this file except in compliance    *\n *  with the License. A copy of the License is located at                                                             *\n *                                                                                                                    *\n *      http://www.apache.org/licenses/LICENSE-2.0                                                                    *\n *                                                                                                                    *\n *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES *\n *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions    *\n *  and limitations under the License.                                                                                *\n *********************************************************************************************************************/\nimport React, { Fragment } from \"react\";\nimport styles from \"./KendraHighlightedText.scss\";\n\nfunction unionSortedHighlights(highlights) {\n  if (!highlights) {\n    return highlights;\n  }\n\n  let prev = highlights[0];\n  const unioned = [prev];\n\n  for (let i = 1; i < highlights.length; i++) {\n    const h = highlights[i];\n\n    if (prev.EndOffset >= h.BeginOffset) {\n      // union\n      prev.EndOffset = Math.max(h.EndOffset, prev.EndOffset);\n      prev.TopAnswer = prev.TopAnswer || h.TopAnswer;\n    } else {\n      // disjoint, add to results\n      unioned.push(h);\n      prev = h;\n    }\n  }\n\n  return unioned;\n}\n\nexport default function KendraHighlightedText({\n  textWithHighlights\n}) {\n  if (!textWithHighlights) return null;\n  const {\n    Text: text,\n    Highlights: highlights\n  } = textWithHighlights;\n\n  if (!highlights || !highlights.length) {\n    return __jsx(\"span\", null, text);\n  }\n\n  const sortedHighlights = unionSortedHighlights(highlights.sort((a, b) => a.BeginOffset - b.BeginOffset));\n  const lastHighlight = sortedHighlights[sortedHighlights.length - 1];\n  return __jsx(\"span\", {\n    className: styles.base\n  }, sortedHighlights.map((highlight, idx) => __jsx(Fragment, {\n    key: idx\n  }, text.substring(idx === 0 ? 0 : sortedHighlights[idx - 1].EndOffset, highlight.BeginOffset), __jsx(\"mark\", null, text.substring(highlight.BeginOffset, highlight.EndOffset)))), text.substring(lastHighlight ? lastHighlight.EndOffset : 0));\n}","map":null,"metadata":{},"sourceType":"module"}