{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/**********************************************************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *\n *                                                                                                                    *\n *  Licensed under the Apache License, Version 2.0 (the License). You may not use this file except in compliance    *\n *  with the License. A copy of the License is located at                                                             *\n *                                                                                                                    *\n *      http://www.apache.org/licenses/LICENSE-2.0                                                                    *\n *                                                                                                                    *\n *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES *\n *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions    *\n *  and limitations under the License.                                                                                *\n *********************************************************************************************************************/\nimport React, { useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport Loading from '../Loading/Loading';\nimport { fetchSingleDocument, deleteDocument } from '../../store/entities/documents/actions';\nimport css from './DocumentListItem.scss';\nexport default function DocumentListItem({\n  id,\n  title,\n  link,\n  basename,\n  extension,\n  documentStatus\n}) {\n  const pending = documentStatus == 'IN_PROGRESS';\n  useRefetch(id, pending);\n  const dispatch = useDispatch();\n  const doDelete = useCallback(e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (confirm('Are you sure you want to delete this document?')) dispatch(deleteDocument(id));\n  }, [dispatch, id]);\n  const fileProcessFailed = documentStatus == 'FAILED';\n\n  const _ref = link || {},\n        {\n    target\n  } = _ref,\n        linkProps = _objectWithoutProperties(_ref, [\"target\"]);\n\n  return __jsx(\"li\", null, pending ? __jsx(\"a\", {\n    className: css.pending,\n    onClick: e => e.preventDefault()\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(Loading, {\n    size: 24,\n    overlay: false\n  })), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.processing\n  }, \"Processing\\u2026\"), __jsx(\"span\", {\n    className: css.deleteSpacer\n  })) : fileProcessFailed ? __jsx(\"a\", {\n    className: css.failedFileRow,\n    target: null\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(\"svg\", {\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"m11.9999259 2.01129642v7.35237875.81817933h7.9707628l.0290631 10.8154583c.0014841.5522828-.4450265 1.0011995-.9973092 1.0026836-.0008958.0000024-.0017915.0000036-.0026872.0000036h-13.9997554c-.55228475 0-1-.4477153-1-1v-17.99982331c0-.55228475.44771525-1 1-1 .00052958 0 .00105915.00000042.00158873.00000126zm1.5999851.22400401 5.9122424 6.31019543h-5.9122424z\"\n  }))), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.failed\n  }, \"Failed\"), __jsx(\"button\", {\n    onClick: doDelete,\n    className: css.deleteButton\n  })) : __jsx(Link, linkProps, __jsx(\"a\", {\n    target: target || null\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(\"svg\", {\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"m11.9999259 2.01129642v7.35237875.81817933h7.9707628l.0290631 10.8154583c.0014841.5522828-.4450265 1.0011995-.9973092 1.0026836-.0008958.0000024-.0017915.0000036-.0026872.0000036h-13.9997554c-.55228475 0-1-.4477153-1-1v-17.99982331c0-.55228475.44771525-1 1-1 .00052958 0 .00105915.00000042.00158873.00000126zm1.5999851.22400401 5.9122424 6.31019543h-5.9122424z\",\n    fillRule: \"evenodd\"\n  }))), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.ready\n  }, \"Ready\"), __jsx(\"button\", {\n    onClick: doDelete,\n    className: css.deleteButton\n  }))));\n}\n\nfunction useRefetch(documentId, pending) {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!pending) return;\n    const to = setInterval(() => {\n      dispatch(fetchSingleDocument(documentId));\n    }, 5000);\n    return () => {\n      clearInterval(to);\n    };\n  }, [dispatch, documentId, pending]);\n}","map":null,"metadata":{},"sourceType":"module"}