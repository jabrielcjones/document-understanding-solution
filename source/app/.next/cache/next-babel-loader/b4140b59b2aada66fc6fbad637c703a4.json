{"ast":null,"code":"import _objectWithoutProperties from \"/home/jabrielcjones/dev/belle_fleur/document-understanding-solution/source/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\n\n/**********************************************************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *\n *                                                                                                                    *\n *  Licensed under the Apache License, Version 2.0 (the License). You may not use this file except in compliance    *\n *  with the License. A copy of the License is located at                                                             *\n *                                                                                                                    *\n *      http://www.apache.org/licenses/LICENSE-2.0                                                                    *\n *                                                                                                                    *\n *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES *\n *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions    *\n *  and limitations under the License.                                                                                *\n *********************************************************************************************************************/\nimport React, { useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Link from 'next/link';\nimport classNames from 'classnames';\nimport Loading from '../Loading/Loading';\nimport { fetchSingleDocument, deleteDocument } from '../../store/entities/documents/actions';\nimport css from './DocumentListItem.scss';\nexport default function DocumentListItem(_ref) {\n  var id = _ref.id,\n      title = _ref.title,\n      link = _ref.link,\n      basename = _ref.basename,\n      extension = _ref.extension,\n      documentStatus = _ref.documentStatus;\n  var pending = documentStatus == 'IN_PROGRESS';\n  useRefetch(id, pending);\n  var dispatch = useDispatch();\n  var doDelete = useCallback(function (e) {\n    e.stopPropagation();\n    e.preventDefault();\n    if (confirm('Are you sure you want to delete this document?')) dispatch(deleteDocument(id));\n  }, [dispatch, id]);\n  var fileProcessFailed = documentStatus == 'FAILED';\n\n  var _ref2 = link || {},\n      target = _ref2.target,\n      linkProps = _objectWithoutProperties(_ref2, [\"target\"]);\n\n  return __jsx(\"li\", null, pending ? __jsx(\"a\", {\n    className: css.pending,\n    onClick: function onClick(e) {\n      return e.preventDefault();\n    }\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(Loading, {\n    size: 24,\n    overlay: false\n  })), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.processing\n  }, \"Processing\\u2026\"), __jsx(\"span\", {\n    className: css.deleteSpacer\n  })) : fileProcessFailed ? __jsx(\"a\", {\n    className: css.failedFileRow,\n    target: null\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(\"svg\", {\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"m11.9999259 2.01129642v7.35237875.81817933h7.9707628l.0290631 10.8154583c.0014841.5522828-.4450265 1.0011995-.9973092 1.0026836-.0008958.0000024-.0017915.0000036-.0026872.0000036h-13.9997554c-.55228475 0-1-.4477153-1-1v-17.99982331c0-.55228475.44771525-1 1-1 .00052958 0 .00105915.00000042.00158873.00000126zm1.5999851.22400401 5.9122424 6.31019543h-5.9122424z\"\n  }))), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.failed\n  }, \"Failed\"), __jsx(\"button\", {\n    onClick: doDelete,\n    className: css.deleteButton\n  })) : __jsx(Link, linkProps, __jsx(\"a\", {\n    target: target || null\n  }, __jsx(\"span\", {\n    className: css.icon\n  }, __jsx(\"svg\", {\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"m11.9999259 2.01129642v7.35237875.81817933h7.9707628l.0290631 10.8154583c.0014841.5522828-.4450265 1.0011995-.9973092 1.0026836-.0008958.0000024-.0017915.0000036-.0026872.0000036h-13.9997554c-.55228475 0-1-.4477153-1-1v-17.99982331c0-.55228475.44771525-1 1-1 .00052958 0 .00105915.00000042.00158873.00000126zm1.5999851.22400401 5.9122424 6.31019543h-5.9122424z\",\n    fillRule: \"evenodd\"\n  }))), __jsx(\"span\", {\n    className: css.filename\n  }, basename), __jsx(\"span\", {\n    className: css.extension\n  }, extension), __jsx(\"span\", {\n    className: css.ready\n  }, \"Ready\"), __jsx(\"button\", {\n    onClick: doDelete,\n    className: css.deleteButton\n  }))));\n}\n\nfunction useRefetch(documentId, pending) {\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (!pending) return;\n    var to = setInterval(function () {\n      dispatch(fetchSingleDocument(documentId));\n    }, 5000);\n    return function () {\n      clearInterval(to);\n    };\n  }, [dispatch, documentId, pending]);\n}","map":null,"metadata":{},"sourceType":"module"}